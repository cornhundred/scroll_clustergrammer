
<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<style>

body{
  width: 900px;
  margin: 0px auto;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}

#container{
  position: relative;
  width: 100%;
  overflow: auto;
}

#sections{
  width: 340px;
  float: left;
}

#sections > div{
  background: white;
  opacity: .1;
  margin-bottom:200px;
}

#sections > div.graph-scroll-active{
  opacity: 1;
}

#graph{
  margin-top: 20px;
  float: left;
  margin-left: 40px;
}

#graph.graph-scroll-fixed{
  position: fixed;
  top: 0px;
  margin-left: 380px;
}

#graph.graph-scroll-below{
  position: absolute;
  bottom: 0px;
  margin-left: 380px;
}

h1{
  margin: 50px;
}

h1, h3{
  text-align: center;
}

circle{
  fill: steelblue;
}

.mono{
  font-family: monospace;
}

svg{
  background-color: #eee;
}

</style>

<h1><a href='https://github.com/1wheel/graph-scroll'>graph-scroll.js</a></h1>

<div id='container'>

  <div id='sections'>

    <div>
      <h3>Connect text and graphics</h3>
      <span class='mono'>graph-scroll</span>
      takes a selection of explanatory text sections and dispatches <span class='mono'>active</span> events as different sections are scrolled into to view. These active events are used to update a graph's state.

    </div>

    <div>
      <h3>Highlight active text</h3>
      The top most text section scrolled into view is classed <span class='mono'>graph-scroll-active</span>. This makes it easy to highlight the active section with css:
    </div>


    <div>
      <h3>Headers and footers</h3>
      To support headers and intro images/text, the explanatory text and graphic are wrapped with a container element:
      and passed to <span class='mono'>graphScroll</span>
    </div>

    <div>
      <h3>Sticky graph</h3>
      When the graph scrolls out of view, it is classed with <span class='mono'>graph-scroll-fixed</span>. With a little bit of css, the graph element snaps to the top of the page while the text scrolls by.
    </div>

  </div>

  <div id='graph'></div>
</div>



<h3 id='source'><a href='https://github.com/1wheel/graph-scroll'>contribute/view on github</a></h3>


<script src="d3.v3.js"></script>
<script src="graph-scroll.js"></script>
<script>

var width = 500,
    height = 500,
    r = 40

var svg = d3.select('#graph')
  .append('svg')
    .attr({width: width, height: height})

var circle = svg.append('circle')
    .attr({cx: 0, cy: 0, r: r})

var colors = ['orange', 'purple', 'steelblue', 'black']
var gs = graphScroll()
    .container(d3.select('#container'))
    .graph(d3.selectAll('#graph'))
    .sections(d3.selectAll('#sections > div'))
    .on('active', function(i){

      console.log(i+'th section active');

      var pos = [ {cx: width - r,         cy: r},
                  {cx: r,                 cy: r},
                  {cx: width - r, cy: height - r},
                  {cx: width/2,   cy: height/2} ][i];

      circle
          .style('fill', colors[i])
          .transition()
          .duration(1000)
          .attr(pos);

    })

d3.select('#source')
    .style({ padding: '500px'})

</script>
