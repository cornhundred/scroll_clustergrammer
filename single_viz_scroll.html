
<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<style>

body{
  width: 1200px;
  margin: 0px auto;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}

#container{
  position: relative;
  width: 100%;
  overflow: auto;
}

#sections{
  margin-top: 50px;
  width: 300px;
  float: left;
}

#sections > div{
  background: white;
  opacity: 0.2;
  margin-bottom:200px;
}

#sections > div.graph-scroll-active{
  opacity: 1;
}

#graph{
  margin-top: 50px;
  float: left;
  margin-left: 40px;
}

#graph.graph-scroll-fixed{
  position: fixed;
  top: 0px;
  margin-left: 340px;
}

#graph.graph-scroll-below{
  position: absolute;
  bottom: 0px;
  margin-left: 380px;
}

#end-div{
  height: 100px;
}

h1{
  margin: 50px;
}

h1, h3{
  text-align: center;
}

circle{
  fill: steelblue;
}

.mono{
  font-family: monospace;
}

svg{
  background-color: #eee;
}

</style>

<h1>Title</h1>

<div id='container'>

  <div id='sections'>

    <div>
      one
      <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec tempus, ante non dapibus rhoncus, sapien massa ullamcorper risus, ac faucibus metus orci in sem. Sed a tellus pulvinar, scelerisque urna ut, venenatis sapien. Fusce accumsan tincidunt orci, eget porta nisl aliquam eu. Proin faucibus commodo blandit. Phasellus egestas diam dolor, pellentesque aliquet felis molestie quis. Aliquam dignissim dui a est ornare, ut dictum sem sollicitudin. Aliquam consequat eros at aliquam consequat. Cras at dapibus nisi, nec posuere nunc. Proin mollis ligula in felis gravida vehicula. In non nibh massa. Vestibulum ut rhoncus tortor. Sed feugiat non lectus non fermentum.
      </p>
    </div>

    <div>
     two
      <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec tempus, ante non dapibus rhoncus, sapien massa ullamcorper risus, ac faucibus metus orci in sem. Sed a tellus pulvinar, scelerisque urna ut, venenatis sapien. Fusce accumsan tincidunt orci, eget porta nisl aliquam eu. Proin faucibus commodo blandit. Phasellus egestas diam dolor, pellentesque aliquet felis molestie quis. Aliquam dignissim dui a est ornare, ut dictum sem sollicitudin. Aliquam consequat eros at aliquam consequat. Cras at dapibus nisi, nec posuere nunc. Proin mollis ligula in felis gravida vehicula. In non nibh massa. Vestibulum ut rhoncus tortor. Sed feugiat non lectus non fermentum.
      </p>
    </div>

    <div>
      three
      <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec tempus, ante non dapibus rhoncus, sapien massa ullamcorper risus, ac faucibus metus orci in sem. Sed a tellus pulvinar, scelerisque urna ut, venenatis sapien. Fusce accumsan tincidunt orci, eget porta nisl aliquam eu. Proin faucibus commodo blandit. Phasellus egestas diam dolor, pellentesque aliquet felis molestie quis. Aliquam dignissim dui a est ornare, ut dictum sem sollicitudin. Aliquam consequat eros at aliquam consequat. Cras at dapibus nisi, nec posuere nunc. Proin mollis ligula in felis gravida vehicula. In non nibh massa. Vestibulum ut rhoncus tortor. Sed feugiat non lectus non fermentum.
      </p>
    </div>

    <div>
      four
      <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec tempus, ante non dapibus rhoncus, sapien massa ullamcorper risus, ac faucibus metus orci in sem. Sed a tellus pulvinar, scelerisque urna ut, venenatis sapien. Fusce accumsan tincidunt orci, eget porta nisl aliquam eu. Proin faucibus commodo blandit. Phasellus egestas diam dolor, pellentesque aliquet felis molestie quis. Aliquam dignissim dui a est ornare, ut dictum sem sollicitudin. Aliquam consequat eros at aliquam consequat. Cras at dapibus nisi, nec posuere nunc. Proin mollis ligula in felis gravida vehicula. In non nibh massa. Vestibulum ut rhoncus tortor. Sed feugiat non lectus non fermentum.
      </p>
    </div>

    <!-- <div id='end-div'>
    </div> -->

  </div>

  <div id='graph'></div>
</div>



<h3 id='source'><a href='https://github.com/1wheel/graph-scroll'>contribute/view on github</a></h3>


<script src="d3.v3.js"></script>
<script src="graph-scroll.js"></script>
<script>

  var width = 800,
      height = 500,
      r = 40

  var svg = d3.select('#graph')
    .append('svg')
    .attr({width: width, height: height})

  var circle = svg.append('circle')
      .attr({cx: 0, cy: 0, r: r})

  var colors = ['orange', 'purple', 'steelblue', 'black']

  // define the container and graph
  var gs = graphScroll()
      .container(d3.select('#container'))
      .graph(d3.selectAll('#graph'))
      .sections(d3.selectAll('#sections > div'))
      .on('active', function(i){

        var pos = [ {cx: width - r,         cy: r},
                    {cx: r,                 cy: r},
                    {cx: width - r, cy: height - r},
                    {cx: width/2,   cy: height/2} ][i];

        circle
            .style('fill', colors[i])
            .transition()
            .duration(1000)
            .attr(pos);

      })

  // this is necessary for scrolling to see the last section
  d3.select('#source')
      .style({ 'margin-top': '400px'})

</script>
